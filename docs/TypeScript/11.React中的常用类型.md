> åœ¨ React å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨ TypeScript æ—¶ï¼Œæœ‰è‹¥å¹²**å¸¸ç”¨ä¸”å…³é”®çš„ç±»å‹å£°æ˜**ï¼Œå®ƒä»¬å¸®åŠ©ä½ è·å¾—å®Œæ•´çš„ç±»å‹å®‰å…¨ã€è‡ªåŠ¨è¡¥å…¨å’Œé”™è¯¯æ£€æŸ¥ã€‚

1. React é¡¹ç›®æ˜¯é€šè¿‡ `@types/react`ã€`@types/react-dom` ç±»å‹å£°æ˜åŒ…ï¼Œæ¥æä¾›ç±»å‹çš„ã€‚
2. è¿™äº›åŒ… CRA å·²å¸®æˆ‘ä»¬å®‰è£…å¥½(`react-app-env.d.ts`)ï¼Œç›´æ¥ç”¨å³å¯ã€‚

---

### âœ… 1. **å‡½æ•°ç»„ä»¶æœ¬èº«çš„ç±»å‹**

```tsx
// TS ä¼šè‡ªåŠ¨æ¨æ–­ props ç±»å‹å’Œè¿”å›å€¼ï¼ˆJSX.Elementï¼‰
const MyComponent = ({ name, age }: { name: string; age: number }) => {
  return <div>Hello, {name}!</div>;
};
```
---

### âœ… 2. **Props ç±»å‹å®šä¹‰ï¼ˆæœ€æ ¸å¿ƒï¼ï¼‰**

#### æ¨èï¼šä½¿ç”¨ `interface` æˆ– `type`
```tsx
interface Props {
  title: string;
  count?: number;           // å¯é€‰å±æ€§
  onClick: () => void;      // å¿…éœ€å›è°ƒ
  status: 'loading' | 'idle' | 'success'; // å­—é¢é‡è”åˆç±»å‹
}

const MyComponent = ({ title, count = 0, onClick, status }: Props) => {
  return (
    <button disabled={status === 'loading'} onClick={onClick}>
      {title} ({count})
    </button>
  );
};
```

> ğŸ’¡ **æœ€ä½³å®è·µ**ï¼š
> - ä½¿ç”¨ `interface`ï¼ˆä¾¿äºæ‰©å±•ï¼‰
> - æ˜ç¡®åŒºåˆ†å¯é€‰ï¼ˆ`?`ï¼‰å’Œå¿…éœ€å±æ€§
> - å›è°ƒå‡½æ•°ä½¿ç”¨ `() => void` æˆ– `(arg: T) => void`

---

### âœ… 3. **äº‹ä»¶å¤„ç†å‡½æ•°ç±»å‹**

#### å¸¸è§äº‹ä»¶ç±»å‹ï¼š
```tsx
import React, { ChangeEvent, MouseEvent, FormEvent } from 'react';

const InputComponent = () => {
  const handleChange = (e: ChangeEvent<HTMLInputElement>) => {
    console.log(e.target.value);
  };

  const handleClick = (e: MouseEvent<HTMLButtonElement>) => {
    e.preventDefault();
  };

  const handleSubmit = (e: FormEvent<HTMLFormElement>) => {
    e.preventDefault();
  };

  return (
    <form onSubmit={handleSubmit}>
      <input onChange={handleChange} />
      <button onClick={handleClick}>Submit</button>
    </form>
  );
};
```

> ğŸ”‘ **å¸¸ç”¨äº‹ä»¶ç±»å‹**ï¼š
> - `ChangeEvent<T>`ï¼šè¾“å…¥æ¡†ã€é€‰æ‹©æ¡†ç­‰å€¼å˜åŒ–
> - `MouseEvent<T>`ï¼šç‚¹å‡»ã€æ‚¬åœç­‰
> - `KeyboardEvent<T>`ï¼šé”®ç›˜äº‹ä»¶
> - `FormEvent<T>`ï¼šè¡¨å•æäº¤
> - `FocusEvent<T>`ï¼šèšç„¦/å¤±ç„¦

---

### âœ… 4. **Ref ç±»å‹**

#### ä½¿ç”¨ `useRef`ï¼š
```tsx
import { useRef, useEffect } from 'react';

const FocusInput = () => {
  // HTMLInputElement æ˜¯ input å…ƒç´ çš„ç±»å‹
  const inputRef = useRef<HTMLInputElement>(null);

  useEffect(() => {
    inputRef.current?.focus(); // å®‰å…¨è°ƒç”¨
  }, []);

  return <input ref={inputRef} />;
};
```

#### è‡ªå®šä¹‰ç»„ä»¶ Refï¼ˆé…åˆ `forwardRef`ï¼‰ï¼š
```tsx
import { forwardRef, Ref } from 'react';

interface CustomInputProps {
  value: string;
  onChange: (val: string) => void;
}

// è‡ªå®šä¹‰ç»„ä»¶æš´éœ²çš„ ref ç±»å‹ï¼ˆé€šå¸¸æ˜¯ HTML å…ƒç´ æˆ–å®ä¾‹æ–¹æ³•ï¼‰
const CustomInput = forwardRef<HTMLInputElement, CustomInputProps>(
  ({ value, onChange }, ref) => {
    return <input ref={ref} value={value} onChange={e => onChange(e.target.value)} />;
  }
);
```

---

### âœ… 5. **Context ç±»å‹**

```tsx
import { createContext, useContext } from 'react';

interface ThemeContextType {
  theme: 'light' | 'dark';
  toggleTheme: () => void;
}

const ThemeContext = createContext<ThemeContextType | null>(null);

// è‡ªå®šä¹‰ hook å°è£…
const useTheme = () => {
  const context = useContext(ThemeContext);
  if (!context) {
    throw new Error('useTheme must be used within ThemeProvider');
  }
  return context;
};
```

> ğŸ’¡ æ³¨æ„ï¼š`createContext` çš„åˆå§‹å€¼ç±»å‹è¦ä¸å®é™… Provider æä¾›çš„å€¼ä¸€è‡´ã€‚

---

### âœ… 6. **State ç±»å‹ï¼ˆuseStateï¼‰**

```tsx
import { useState } from 'react';

const Counter = () => {
  // TS è‡ªåŠ¨æ¨æ–­ count ä¸º number
  const [count, setCount] = useState(0);

  // æ˜¾å¼å£°æ˜å¤æ‚çŠ¶æ€
  interface User {
    id: string;
    name: string;
  }
  const [user, setUser] = useState<User | null>(null);
};
```

> âœ… **æŠ€å·§**ï¼šå¯¹å¤æ‚å¯¹è±¡æˆ–å¯èƒ½ä¸º `null` çš„çŠ¶æ€ï¼Œæ˜¾å¼æ ‡æ³¨æ³›å‹æ›´å®‰å…¨ã€‚

---

### âœ… 7. **è‡ªå®šä¹‰ Hook ç±»å‹**

```tsx
// è¿”å›å€¼ç±»å‹è‡ªåŠ¨æ¨æ–­ï¼Œä¹Ÿå¯æ˜¾å¼å£°æ˜
const useLocalStorage = <T>(key: string, initialValue: T): [T, (value: T) => void] => {
  const [storedValue, setStoredValue] = useState<T>(() => {
    try {
      const item = window.localStorage.getItem(key);
      return item ? JSON.parse(item) : initialValue;
    } catch (error) {
      return initialValue;
    }
  });

  const setValue = (value: T) => {
    setStoredValue(value);
    window.localStorage.setItem(key, JSON.stringify(value));
  };

  return [storedValue, setValue];
};

// ä½¿ç”¨
const [name, setName] = useLocalStorage<string>('name', 'Alice');
```

---

### âœ… 8. **Children ç±»å‹ï¼ˆå¦‚æœéœ€è¦æ˜¾å¼å£°æ˜ï¼‰**

è™½ç„¶é€šå¸¸ä¸éœ€è¦ï¼ˆå› ä¸º JSX è‡ªåŠ¨å¤„ç†ï¼‰ï¼Œä½†å¦‚æœç»„ä»¶æ¥å— `children` ä¸”ä½ æƒ³æ˜¾å¼çº¦æŸï¼š

```tsx
interface CardProps {
  children: React.ReactNode; // æœ€é€šç”¨
  // æˆ–æ›´ä¸¥æ ¼ï¼šchildren: string | JSX.Element | (string | JSX.Element)[];
}

const Card = ({ children }: CardProps) => {
  return <div className="card">{children}</div>;
};
```

> ğŸ“Œ **`React.ReactNode` æ˜¯æœ€å¸¸ç”¨çš„ children ç±»å‹**ï¼Œå®ƒåŒ…æ‹¬ï¼š
> - `string`ã€`number`
> - `JSX.Element`
> - `null`ã€`undefined`ã€`boolean`ï¼ˆä¼šè¢«å¿½ç•¥ï¼‰
> - æ•°ç»„ï¼ˆåµŒå¥—ï¼‰

---


### âœ… æ€»ç»“ï¼šReact å‡½æ•°ç»„ä»¶å¸¸ç”¨ TS ç±»å‹æ¸…å•

| åœºæ™¯ | æ¨èç±»å‹ |
|------|--------|
| **ç»„ä»¶ Props** | `interface Props { ... }` |
| **äº‹ä»¶å¤„ç†** | `ChangeEvent<HTMLInputElement>`, `MouseEvent<HTMLButtonElement>` ç­‰ |
| **Refs** | `useRef<HTMLInputElement>(null)` |
| **State** | `useState<number>(0)`, `useState<User \| null>(null)` |
| **Context** | `createContext<MyContextType \| null>(null)` |
| **Children** | `React.ReactNode`ï¼ˆé€šå¸¸æ— éœ€æ˜¾å¼å£°æ˜ï¼‰ |
| **è‡ªå®šä¹‰ Hook è¿”å›å€¼** | æ˜¾å¼å…ƒç»„ç±»å‹ `[T, (v: T) => void]` |
