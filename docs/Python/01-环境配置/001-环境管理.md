# ç¯å¢ƒç®¡ç†

> é»˜è®¤ç³»ç»Ÿï¼ˆmacï¼‰ä¸Šå®‰è£… `Python 3.14.0` ç‰ˆæœ¬

## pyenv å®‰è£…ä¸é…ç½®

ä½¿ç”¨ pyenv æ¥ç®¡ç†å¤šä¸ª Python ç‰ˆæœ¬ï¼Œè¿™æ ·ä½ å¯ä»¥è½»æ¾åœ°åœ¨ä¸åŒé¡¹ç›®ä¸­ä½¿ç”¨ä¸åŒç‰ˆæœ¬çš„ Pythonã€‚

```bash
# ä½¿ç”¨ Homebrew å®‰è£… pyenv
brew install pyenv

# ç¼–è¾‘ zsh é…ç½®æ–‡ä»¶
nano ~/.zshrc

# åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ï¼š
export PYENV_ROOT="$HOME/.pyenv"
export PATH="$PYENV_ROOT/bin:$PATH"
eval "$(pyenv init -)"

# ä¿å­˜å¹¶é€€å‡ºï¼ˆCtrl+O â†’ å›è½¦ â†’ Ctrl+Xï¼‰ï¼Œç„¶åé‡æ–°åŠ è½½é…ç½®ï¼š
source ~/.zshrec

# å®‰è£… Python 3.11.0
pyenv install 3.11.0

# æŸ¥çœ‹å·²å®‰è£…çš„ Python ç‰ˆæœ¬
pyenv versions

# è®¾ç½® Python ç‰ˆæœ¬ å…¨å±€:
pyenv global 3.11.0

# è®¾ç½® Python ç‰ˆæœ¬ é¡¹ç›®çº§:
cd /path/to/your/project
pyenv local 3.11.0

# éªŒè¯å®‰è£…
python --version

# ä¹Ÿå¯ä»¥éšæ—¶åˆ‡æ¢å› 3.14.0ï¼š
pyenv local 3.14.0
python --version  # è¾“å‡º Python 3.14.0
```

## pipx å’Œ pip å¯¹æ¯”

### ğŸ” ä¸€ã€æ ¸å¿ƒå®šä½ä¸åŒ

| å·¥å…·   | ä¸»è¦ç”¨é€”                                                                                 |
| ------ | ---------------------------------------------------------------------------------------- |
| `pip`  | å®‰è£… Python åŒ…åˆ°å½“å‰ Python ç¯å¢ƒï¼ˆå…¨å±€æˆ–è™šæ‹Ÿç¯å¢ƒï¼‰ï¼Œç”¨äºå¼€å‘æˆ–è¿è¡Œä»£ç ã€‚                 |
| `pipx` | **ä¸“é—¨ç”¨äºå®‰è£…å’Œè¿è¡Œ Python å‘½ä»¤è¡Œå·¥å…·ï¼ˆCLI å·¥å…·ï¼‰**ï¼Œæ¯ä¸ªå·¥å…·éƒ½éš”ç¦»åœ¨ç‹¬ç«‹çš„è™šæ‹Ÿç¯å¢ƒä¸­ã€‚ |

> âœ… ç®€å•è¯´ï¼š
>
> - ä½ æƒ³åœ¨é¡¹ç›®ä¸­ç”¨ `requests`ï¼Ÿâ†’ ç”¨ `pip`
> - ä½ æƒ³åœ¨ç»ˆç«¯ç”¨ `black`ã€`ruff`ã€`pdm`ã€`uv` è¿™äº›å‘½ä»¤ï¼Ÿâ†’ ç”¨ `pipx`

---

### ğŸ“¦ äºŒã€å®‰è£…æ–¹å¼ä¸ç¯å¢ƒéš”ç¦»å¯¹æ¯”

| ç‰¹æ€§                   | `pip`                                             | `pipx`                                |
| ---------------------- | ------------------------------------------------- | ------------------------------------- |
| æ˜¯å¦éš”ç¦»ç¯å¢ƒ           | âŒ é»˜è®¤ä¸éš”ç¦»ï¼ˆé™¤éæ‰‹åŠ¨æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼‰             | âœ… **è‡ªåŠ¨ä¸ºæ¯ä¸ªå·¥å…·åˆ›å»ºç‹¬ç«‹è™šæ‹Ÿç¯å¢ƒ** |
| å®‰è£…ä½ç½®               | å½“å‰ Python ç¯å¢ƒçš„ `site-packages`                | `~/.local/pipx/venvs/<package>/`      |
| æ˜¯å¦æ±¡æŸ“å…¨å±€ç¯å¢ƒ       | âœ… å®¹æ˜“ï¼ˆå°¤å…¶ç”¨ `pip install --user` æˆ–å…¨å±€å®‰è£…ï¼‰ | âŒ ä¸ä¼šï¼Œå®Œå…¨éš”ç¦»                     |
| å¯å¦åŒæ—¶å®‰è£…å¤šä¸ªç‰ˆæœ¬ï¼Ÿ | âŒ å›°éš¾                                           | âœ… ç†è®ºä¸Šå¯ä»¥ï¼ˆéœ€æ‰‹åŠ¨ç®¡ç†ï¼‰           |

ç¤ºä¾‹è¯´æ˜ï¼š

```bash
# ä½¿ç”¨ pip å®‰è£… ruffï¼ˆå…¨å±€ï¼‰
pip install ruff
```

- `ruff` è¢«å®‰è£…åˆ°å½“å‰ Python ç¯å¢ƒçš„ `site-packages`
- å¦‚æœè¯¥ç¯å¢ƒå·²æœ‰å…¶ä»–ä¾èµ–å†²çªï¼Œå¯èƒ½å‡ºé”™
- å¤šä¸ªé¡¹ç›®å…±ç”¨ï¼Œå®¹æ˜“ç‰ˆæœ¬å†²çª

```bash
# ä½¿ç”¨ pipx å®‰è£… ruff
pipx install ruff
```

- `pipx` è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªç‹¬ç«‹è™šæ‹Ÿç¯å¢ƒ `~/.local/pipx/venvs/ruff/`
- æ‰€æœ‰ `ruff` çš„ä¾èµ–éƒ½å®‰è£…åœ¨è¿™ä¸ªç¯å¢ƒä¸­
- ä¸å½±å“ç³»ç»Ÿæˆ–å…¶ä»–å·¥å…·
- ä½ å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è¿è¡Œ `ruff` å‘½ä»¤

---

### ğŸ›  ä¸‰ã€ä½¿ç”¨æ–¹å¼å¯¹æ¯”

| åœºæ™¯                                | `pip`                         | `pipx`                         |
| ----------------------------------- | ----------------------------- | ------------------------------ |
| å®‰è£…åŒ…ä¾›é¡¹ç›®ä½¿ç”¨                    | âœ… `pip install requests`     | âŒ ä¸é€‚åˆ                      |
| å®‰è£… CLI å·¥å…·ï¼ˆå¦‚ `black`, `ruff`ï¼‰ | âš ï¸ å¯ä»¥ï¼Œä½†æ˜“å†²çª             | âœ… æ¨èæ–¹å¼                    |
| è¿è¡Œä¸€æ¬¡æ€§å‘½ä»¤                      | âŒ ä¸æ”¯æŒ                     | âœ… `pipx run black --version`  |
| å‡çº§å·¥å…·                            | `pip install --upgrade black` | `pipx upgrade black`           |
| åˆ—å‡ºå·²å®‰è£…å·¥å…·                      | `pip list`ï¼ˆæ˜¾ç¤ºæ‰€æœ‰åŒ…ï¼‰      | `pipx list`ï¼ˆåªæ˜¾ç¤º CLI å·¥å…·ï¼‰ |
| å¸è½½                                | `pip uninstall black`         | `pipx uninstall black`         |

> ğŸ’¡ `pipx run` æ˜¯ä¸€ä¸ªå¼ºå¤§åŠŸèƒ½ï¼šä½ å¯ä»¥ä¸´æ—¶è¿è¡Œä¸€ä¸ªå·¥å…·è€Œæ— éœ€å®‰è£…ï¼š
>
> ```bash
> pipx run black --version  # ä¸´æ—¶ä¸‹è½½å¹¶è¿è¡Œ black
> ```

---

### ğŸ§© å››ã€å…¸å‹ä½¿ç”¨åœºæ™¯

#### âœ… åº”è¯¥ç”¨ `pip` çš„æƒ…å†µï¼š

- åœ¨é¡¹ç›®ä¸­å®‰è£…ä¾èµ–ï¼š`pip install django`
- åœ¨è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…åŒ…ï¼š`venv/bin/pip install numpy`
- æ„å»ºè‡ªå·±çš„åº“æˆ–åº”ç”¨

#### âœ… åº”è¯¥ç”¨ `pipx` çš„æƒ…å†µï¼š

- å®‰è£…å¼€å‘å·¥å…·ï¼š`pipx install black ruff pdm uv poetry`
- å®‰è£…å‘½ä»¤è¡Œè„šæœ¬ï¼š`pipx install httpx`
- ä¸´æ—¶è¿è¡Œä¸€ä¸ªå·¥å…·ï¼š`pipx run mkdocs serve`

---

### ğŸ”„ äº”ã€æ˜¯å¦äº’æ–¥ï¼Ÿå¯ä»¥å…±å­˜å—ï¼Ÿ

âœ… **å®Œå…¨å¯ä»¥å…±å­˜**ï¼Œè€Œä¸”**æ¨èæ­é…ä½¿ç”¨**ï¼š

```bash
# 1. ç”¨ pipx å®‰è£…ç°ä»£å·¥å…·ï¼ˆå®‰å…¨ã€éš”ç¦»ï¼‰
pipx install pdm
pipx install uv
pipx install ruff

# 2. ç”¨è¿™äº›å·¥å…·æ¥ç®¡ç†ä½ çš„é¡¹ç›®
pdm init
pdm add requests

# 3. åœ¨é¡¹ç›®å†…éƒ¨ï¼Œpdm æˆ– uv ä¼šä½¿ç”¨ pipï¼ˆæˆ– uvï¼‰æ¥å®‰è£…ä¾èµ–
```

> ğŸ“Œ æœ€ä½³å®è·µï¼š**ç”¨ `pipx` å®‰è£…å·¥å…·ï¼Œç”¨å·¥å…·ç®¡ç†é¡¹ç›®ä¾èµ–**

---

### âœ… æ€»ç»“ï¼š`pip` vs `pipx` å®‰è£…ä¾èµ–çš„åŒºåˆ«

| å¯¹æ¯”é¡¹                   | `pip`               | `pipx`                                             |
| ------------------------ | ------------------- | -------------------------------------------------- |
| ç›®çš„                     | å®‰è£…åº“ä¾›ä»£ç ä½¿ç”¨    | å®‰è£… CLI å·¥å…·ä¾›å‘½ä»¤è¡Œä½¿ç”¨                          |
| ç¯å¢ƒéš”ç¦»                 | æ— ï¼ˆé™¤éæ‰‹åŠ¨ç®¡ç†ï¼‰  | **è‡ªåŠ¨éš”ç¦»**ï¼ˆæ¯ä¸ªå·¥å…·ç‹¬ç«‹è™šæ‹Ÿç¯å¢ƒï¼‰               |
| æ˜¯å¦æ¨èç”¨äºå…¨å±€å®‰è£…     | âŒ ä¸æ¨èï¼ˆæ˜“å†²çªï¼‰ | âœ… å¼ºçƒˆæ¨è                                        |
| é€‚åˆå®‰è£… `black` å—ï¼Ÿ    | å¯ä»¥ï¼Œä½†æœ‰é£é™©      | âœ… æœ€ä½³æ–¹å¼                                        |
| é€‚åˆå®‰è£… `requests` å—ï¼Ÿ | âœ… æ˜¯               | âŒ ä¸é€‚åˆï¼ˆé™¤éä½ å†™äº†ä¸ªå« `requests` çš„ CLI å·¥å…·ï¼‰ |
| æ€§èƒ½                     | å¿«                  | ç¨æ…¢ï¼ˆå› ä¸ºè¦åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼‰ï¼Œä½†å€¼å¾—                 |

---

#### ğŸ¯ ä¸€å¥è¯æ€»ç»“ï¼š

> **`pip` æ˜¯ç”¨æ¥å®‰è£…â€œåº“â€çš„ï¼Œ`pipx` æ˜¯ç”¨æ¥å®‰è£…â€œå‘½ä»¤â€çš„ã€‚**

- ä½ è¦åœ¨ä»£ç é‡Œ `import requests`ï¼Ÿâ†’ ç”¨ `pip`
- ä½ è¦åœ¨ç»ˆç«¯è¿è¡Œ `ruff .`ï¼Ÿâ†’ ç”¨ `pipx`

è¿™æ ·ç”¨ï¼Œä½ çš„ Python ç¯å¢ƒæ‰ä¼šå¹²å‡€ã€å®‰å…¨ã€é«˜æ•ˆã€‚

## åŒ…ç®¡ç†å·¥å…· uv å®‰è£…ä¸ä½¿ç”¨

`uv` æ˜¯ä¸€ä¸ªç”¨ **Rust** ç¼–å†™çš„**é«˜æ€§èƒ½ Python åŒ…å®‰è£…å™¨ã€ä¾èµ–è§£æå™¨å’Œè™šæ‹Ÿç¯å¢ƒç®¡ç†å™¨**ï¼Œç”±å¼€å‘ `Ruff`ï¼ˆè¶…å¿« Python linterï¼‰çš„å…¬å¸ [Astral](https://astral.sh/) æ¨å‡ºã€‚

- å®ƒæ—¨åœ¨æ›¿ä»£ `pip`ã€`virtualenv` å’Œ `pip-tools`ï¼Œé€Ÿåº¦æå¿«ï¼ˆå·ç§°æ¯” pip å¿« 10-100 å€ï¼‰ã€‚
- æ”¯æŒç°ä»£ Python æ‰“åŒ…æ ‡å‡†ï¼ˆPEP 508, PEP 621 ç­‰ï¼‰
- å¯ä½œä¸º `pip` + `venv` çš„ç°ä»£åŒ–æ›¿ä»£å“

### ğŸ”§ å®‰è£…å’Œç”¨æ³•

```bash
pipx install uv  # æ¨è
```

- åˆå§‹åŒ–é¡¹ç›®ï¼š`uv init`
- å®‰è£…åŒ…å¹¶è‡ªåŠ¨æ·»åŠ åˆ° `pyproject.toml` ä¸­ï¼š`uv add [--dev] requests`
- å®‰è£…åŒ…ï¼š`uv install requests`
- å®‰è£…ä¾èµ–æ–‡ä»¶ï¼š`uv install -r requirements.txt`
- åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼š`uv venv .venv`
- ä» pyproject.toml é¡¹ç›®åŒæ­¥ä¾èµ–ï¼š`uv sync`

### ğŸ“¦ uv ç´¢å¼•æºé…ç½®

åœ¨ä½¿ç”¨ `uv` æ—¶ï¼Œä½ å¯ä»¥é€šè¿‡é…ç½® **index URLsï¼ˆç´¢å¼•æºï¼‰** æ¥ä»ä¸åŒçš„æºï¼ˆå¦‚å›½å†…é•œåƒæºï¼‰ä¸‹è½½ Python åŒ…ï¼Œè¿™åœ¨è®¿é—® PyPI å®˜æ–¹æºè¾ƒæ…¢æ—¶éå¸¸æœ‰ç”¨ï¼ˆä¾‹å¦‚åœ¨ä¸­å›½å¤§é™†åœ°åŒºï¼‰ã€‚

`uv` æ”¯æŒä¸ `pip` å…¼å®¹çš„ç´¢å¼•æºé…ç½®æ–¹å¼ï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤è¡Œå‚æ•°æˆ–é…ç½®æ–‡ä»¶æŒ‡å®šè‡ªå®šä¹‰æºã€‚

#### ä¸€ã€ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°æŒ‡å®šæº

1. ä½¿ç”¨ `--index-url` æŒ‡å®šä¸»æºï¼ˆæ›¿æ¢ PyPIï¼‰

```bash
uv install requests --index-url https://pypi.tuna.tsinghua.edu.cn/simple
```

è¿™ä¼šä» **æ¸…åå¤§å­¦é•œåƒæº** ä¸‹è½½ `requests` åŠå…¶ä¾èµ–ã€‚

2. ä½¿ç”¨ `--extra-index-url` æ·»åŠ é¢å¤–æºï¼ˆä¿ç•™ PyPIï¼Œä½†ä¼˜å…ˆä½¿ç”¨é•œåƒï¼‰

```bash
uv install requests --extra-index-url https://pypi.tuna.tsinghua.edu.cn/simple
```

- ä¼˜å…ˆä»æŒ‡å®šé•œåƒæºæŸ¥æ‰¾åŒ…
- å¦‚æœæ‰¾ä¸åˆ°ï¼Œä¼šå›é€€åˆ°é»˜è®¤çš„ PyPI æº
- æ›´å®‰å…¨ï¼Œé¿å…æŸäº›ç§æœ‰åŒ…æˆ–æ–°åŒ…åœ¨é•œåƒä¸­æœªåŒæ­¥çš„é—®é¢˜

3. åŒæ—¶ä½¿ç”¨å¤šä¸ªé¢å¤–æº

```bash
uv install requests \
  --extra-index-url https://pypi.tuna.tsinghua.edu.cn/simple \
  --extra-index-url https://pypi.douban.com/simple
```

#### äºŒã€ä½¿ç”¨é…ç½®æ–‡ä»¶ï¼ˆæ¨èé•¿æœŸä½¿ç”¨ï¼‰

`uv` æ”¯æŒé€šè¿‡é…ç½®æ–‡ä»¶è®¾ç½®é»˜è®¤çš„ç´¢å¼•æºï¼Œé¿å…æ¯æ¬¡æ‰‹åŠ¨è¾“å…¥ã€‚

1. ä½¿ç”¨ `pyproject.toml`ï¼ˆé¡¹ç›®çº§é…ç½®ï¼‰

åœ¨é¡¹ç›®æ ¹ç›®å½•çš„ `pyproject.toml` ä¸­æ·»åŠ ï¼š

```toml
[tool.uv]
index-url = "https://pypi.tuna.tsinghua.edu.cn/simple"
extra-index-urls = [
    "https://pypi.org/simple"
]
```

è¿™æ ·ï¼Œ`uv install` ä¼šé»˜è®¤ä½¿ç”¨æ¸…åæºã€‚

2. ä½¿ç”¨å…¨å±€é…ç½®æ–‡ä»¶

`uv` çš„å…¨å±€é…ç½®æ–‡ä»¶è·¯å¾„ï¼ˆå–å†³äºç³»ç»Ÿï¼‰ï¼š

- **macOS**: `~/Library/Application Support/uv/config.toml`
- **Linux**: `~/.config/uv/config.toml`
- **Windows**: `%APPDATA%\uv\config.toml`

åœ¨ `config.toml` ä¸­æ·»åŠ ï¼š

```toml
[index]
url = "https://pypi.tuna.tsinghua.edu.cn/simple"
```

æˆ–ä½¿ç”¨é¢å¤–æºï¼š

```toml
[extra-index]
urls = ["https://pypi.tuna.tsinghua.edu.cn/simple"]
```

> âš ï¸ æ³¨æ„ï¼š`uv` ç›®å‰ä»åœ¨å¿«é€Ÿè¿­ä»£ï¼Œé…ç½®æ–‡ä»¶æ ¼å¼å¯èƒ½ç•¥æœ‰å˜åŒ–ï¼Œè¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚

#### ä¸‰ã€å¸¸ç”¨å›½å†…é•œåƒæºï¼ˆå¯æ›¿æ¢ URLï¼‰

| é•œåƒæº           | URL                                        |
| ---------------- | ------------------------------------------ |
| æ¸…åå¤§å­¦         | `https://pypi.tuna.tsinghua.edu.cn/simple` |
| é˜¿é‡Œäº‘           | `https://mirrors.aliyun.com/pypi/simple`   |
| ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦ | `https://pypi.mirrors.ustc.edu.cn/simple`  |

#### å››ã€éªŒè¯æ˜¯å¦ç”Ÿæ•ˆ

ä½ å¯ä»¥é€šè¿‡ `--verbose` æŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼š

```bash
uv install requests --extra-index-url https://pypi.tuna.tsinghua.edu.cn/simple --verbose
```

åœ¨è¾“å‡ºä¸­ä½ ä¼šçœ‹åˆ°ç±»ä¼¼ï¼š

```
Fetching: https://pypi.tuna.tsinghua.edu.cn/simple/requests/
```

è¯´æ˜æ­£åœ¨ä»æŒ‡å®šæºä¸‹è½½ã€‚

#### äº”ã€æ³¨æ„äº‹é¡¹

1. **å®‰å…¨æ€§**ï¼šç¡®ä¿ä½ ä¿¡ä»»æ‰€ä½¿ç”¨çš„é•œåƒæºï¼Œé¿å…æ¶æ„åŒ…ã€‚
2. **åŒæ­¥å»¶è¿Ÿ**ï¼šé•œåƒæºå¯èƒ½æ¯”å®˜æ–¹ PyPI å»¶è¿Ÿå‡ åˆ†é’Ÿåˆ°å‡ å°æ—¶ã€‚
3. **ç§æœ‰åŒ…**ï¼šå¦‚æœä½ ä½¿ç”¨ç§æœ‰åŒ…ç´¢å¼•ï¼Œä¹Ÿå¯ä»¥ç”¨ `--index-url` æŒ‡å‘ç§æœ‰ä»“åº“ï¼ˆå¦‚ Nexusã€Artifactoryï¼‰ã€‚
4. **å…¼å®¹æ€§**ï¼š`uv` çš„ç´¢å¼•å‚æ•°ä¸ `pip` åŸºæœ¬å…¼å®¹ï¼Œä¹ æƒ¯ `pip` çš„ç”¨æˆ·å¯ä»¥æ— ç¼è¿ç§»ã€‚

`uv` **ä¸ä¼šè‡ªåŠ¨è¯»å– `pip.conf` æˆ– `pip.ini`**ï¼Œå³ä½¿ä½ å·²ç»ä¸º `pip` é…ç½®äº†é•œåƒæºï¼Œ`uv` ä»ä¼šä½¿ç”¨é»˜è®¤çš„ PyPIã€‚

æ‰€ä»¥ä½ éœ€è¦**å•ç‹¬ä¸º `uv` é…ç½®**ï¼Œæˆ–è€…åœ¨å‘½ä»¤è¡Œä¸­æŒ‡å®šã€‚

> ğŸ’¡ æ¨èï¼šåœ¨ä¸­å›½å¤§é™†åœ°åŒºå¼€å‘æ—¶ï¼Œä½¿ç”¨ `--extra-index-url https://pypi.tuna.tsinghua.edu.cn/simple` ä»¥è·å¾—æœ€ä½³ä¸‹è½½é€Ÿåº¦ã€‚

### `uv install` å’Œ `uv add`

- `uv add` æ˜¯ **é¡¹ç›®æ¨¡å¼ï¼ˆproject modeï¼‰** ä¸‹çš„å‘½ä»¤ï¼Œç”¨äº**å£°æ˜å¼ç®¡ç†ä¾èµ–**ï¼Œä¼šè‡ªåŠ¨å°†åŒ…å†™å…¥ `pyproject.toml`ã€‚
- `uv install` æ˜¯ **ç¯å¢ƒæ¨¡å¼ï¼ˆenvironment modeï¼‰** ä¸‹çš„å‘½ä»¤ï¼Œç”¨äº**ç›´æ¥å®‰è£…åŒ…**ï¼Œä¸ä¼šä¿®æ”¹ `pyproject.toml`ã€‚

#### ğŸ“š è¯¦ç»†å¯¹æ¯”

| ç‰¹æ€§                          | `uv add requests`                          | `uv install requests`                             |
| ----------------------------- | ------------------------------------------ | ------------------------------------------------- |
| **æ˜¯å¦ä¿®æ”¹ `pyproject.toml`** | âœ… æ˜¯ï¼Œè‡ªåŠ¨æ·»åŠ åˆ° `[project.dependencies]` | âŒ å¦ï¼Œä¸ä¿®æ”¹ä»»ä½•æ–‡ä»¶                             |
| **æ˜¯å¦éœ€è¦ `pyproject.toml`** | âœ… æ˜¯ï¼Œå¿…é¡»åœ¨é¡¹ç›®ç›®å½•ä¸­æˆ–å·²åˆå§‹åŒ–          | âŒ å¦ï¼Œå¯åœ¨ä»»æ„ Python ç¯å¢ƒä½¿ç”¨                   |
| **è®¾è®¡ç”¨é€”**                  | å£°æ˜å¼ä¾èµ–ç®¡ç†ï¼ˆç±»ä¼¼ `npm install pkg`ï¼‰   | ç›´æ¥å®‰è£…åŒ…ï¼ˆç±»ä¼¼ `pip install pkg`ï¼‰              |
| **æ˜¯å¦ç”Ÿæˆ lock æ–‡ä»¶**        | âœ… æ˜¯ï¼Œæ›´æ–° `uv.lock`                      | âœ… æ˜¯ï¼Œä¹Ÿä¼šç”Ÿæˆ/æ›´æ–° `uv.lock`ï¼ˆå¦‚æœåœ¨é¡¹ç›®ä¸­ï¼‰    |
| **æ¨èä½¿ç”¨åœºæ™¯**              | ç°ä»£ Python é¡¹ç›®å¼€å‘ï¼ˆæ¨èï¼‰               | å¿«é€Ÿæµ‹è¯•ã€è„šæœ¬ç¯å¢ƒã€éé¡¹ç›®åœºæ™¯                    |
| **ç±»æ¯”å·¥å…·**                  | `npm add`, `poetry add`, `pdm add`         | `pip install`, `npm install --save-dev`ï¼ˆæ—§æ–¹å¼ï¼‰ |

#### ğŸ›  `--dev` é€‰é¡¹çš„åŒºåˆ«

1. `uv add --dev pytest`

- å°† `pytest` æ·»åŠ åˆ° `pyproject.toml` çš„å¼€å‘ä¾èµ–ä¸­ï¼ˆå¦‚ `[project.optional-dependencies.dev]`ï¼‰
- ä¸‹æ¬¡è¿è¡Œ `uv sync --group dev` ä¼šè‡ªåŠ¨å®‰è£…

2. `uv install --dev pytest`

- âŒ `uv install` **ä¸æ”¯æŒ `--dev` æ ‡å¿—**ï¼
- å¦‚æœä½ è¿è¡Œ `uv install --dev pytest`ï¼Œä¼šæŠ¥é”™ï¼š`error: The argument '--dev' cannot be used with 'install'`

> âš ï¸ è¿™æ˜¯å…³é”®åŒºåˆ«ï¼š`--dev` åªåœ¨ `uv add` å’Œ `uv sync` ä¸­æœ‰æ„ä¹‰ï¼Œå› ä¸ºå®ƒæ˜¯**é¡¹ç›®ä¾èµ–åˆ†ç»„**çš„æ¦‚å¿µï¼Œè€Œ `install` ä¸ç®¡ç†é¡¹ç›®ç»“æ„ã€‚

3. ğŸ§© è¡¥å……è¯´æ˜ï¼š`uv install` çš„ `--dev` æ˜¯ä»€ä¹ˆï¼Ÿ

ä½ å¯èƒ½ä¼šçœ‹åˆ° `uv install --dev .`ï¼Œè¿™é‡Œçš„ `--dev` **ä¸æ˜¯æŒ‡â€œå¼€å‘ä¾èµ–â€**ï¼Œè€Œæ˜¯æŒ‡ **â€œä»¥å¯ç¼–è¾‘æ¨¡å¼å®‰è£…å½“å‰é¡¹ç›®â€**ã€‚

```bash
uv install --dev .

# ç­‰ä»·äºï¼š
pip install -e .
```

è¡¨ç¤ºå®‰è£…å½“å‰é¡¹ç›®æœ¬èº«ï¼ˆä½œä¸ºå¯ç¼–è¾‘åŒ…ï¼‰ï¼Œå¸¸ç”¨äºå¼€å‘åº“ã€‚

è€Œ `uv add --dev` ä¸­çš„ `--dev` æ˜¯æŒ‡ **ä¾èµ–åˆ†ç»„ï¼ˆdev-dependenciesï¼‰**ï¼Œä¸¤è€…å®Œå…¨ä¸åŒã€‚

## åŒ…ç®¡ç†å·¥å…· PDM å®‰è£…ä¸é…ç½®

### ä½¿ç”¨ pipxï¼ˆæ¨èç”¨äºå…¨å±€å®‰è£…ï¼‰

```bash
# å…¨å±€å®‰è£…
pipx install pdm

# éªŒè¯å®‰è£…
pdm --version
```

### åˆå§‹åŒ–é…ç½®ï¼ˆå¯é€‰ï¼‰

```bash
pdm config --list
```

### å¼€å§‹ä½¿ç”¨

```bash
# åˆå§‹åŒ– PDM
pdm init

# æ·»åŠ ä¾èµ–
pdm add requests
pdm add -d pytest  # ä½œä¸ºå¼€å‘ä¾èµ–

# è¿è¡Œè„šæœ¬
pdm run python your_script.py
```

### é€šè¿‡ scripts å¿«æ·å¯åŠ¨

ä½ å¯ä»¥åœ¨ `pyproject.toml `ä¸­å®šä¹‰å¿«æ·å‘½ä»¤ï¼Œæ–¹ä¾¿å¯åŠ¨é¡¹ç›®ã€‚

1. æ·»åŠ å¯åŠ¨è„šæœ¬

ç¼–è¾‘ `pyproject.tomlï¼Œ`æ·»åŠ  `[tool.pdm.scripts] `éƒ¨åˆ†ï¼š

```toml
[tool.pdm.scripts]
start = "python app.py"
dev = "python app.py --debug"
test = "pytest"
lint = "flake8 ."
format = "black ."
```

2. ä½¿ç”¨æ–¹å¼

```bash
pdm run start   # ç›¸å½“äº pdm run python app.py
pdm run dev     # å¯åŠ¨è°ƒè¯•æ¨¡å¼
pdm run test    # è¿è¡Œæµ‹è¯•
pdm run lint    # æ£€æŸ¥ä»£ç é£æ ¼
```

### `pdm shell` æŠ¥é”™

PDM ç‰ˆæœ¬ï¼ˆ2.26.0ï¼‰ä¸­ `shell` å‘½ä»¤å·²ç»è¢«ç§»é™¤äº†ã€‚

```bash
# æŸ¥çœ‹å¯ç”¨çš„è™šæ‹Ÿç¯å¢ƒ
pdm venv list

# 1. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
pdm venv create

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼ˆå‡è®¾ä½¿ç”¨é»˜è®¤çš„venvï¼‰
pdm venv activate
# æˆ–è€…ï¼š
source .venv/bin/activate  # Linux/Mac
# æˆ–è€… Windows: .venv\Scripts\activate

```

### pyproject.toml é…ç½® PDM è„šæœ¬å‘½ä»¤

```toml
[tool.pdm.scripts]

app.cmd = "python app/main.py"    # æ‰§è¡Œçš„å‘½ä»¤
app.env_file = ".env"             # åŠ è½½çš„ç¯å¢ƒå˜é‡æ–‡ä»¶
```

è¿è¡Œè¿™ä¸ªè„šæœ¬: `pdm run app`

å½“ä½ è¿è¡Œ `pdm run app` æ—¶ï¼ŒPDM ä¼šï¼š

1. åŠ è½½ç¯å¢ƒå˜é‡ï¼šé¦–å…ˆä» `.env `æ–‡ä»¶è¯»å–æ‰€æœ‰ç¯å¢ƒå˜é‡

2. æ‰§è¡Œå‘½ä»¤ï¼šç„¶åè¿è¡Œ `python app/main.py`

3. ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼šè‡ªåŠ¨ä½¿ç”¨å½“å‰é¡¹ç›®çš„è™šæ‹Ÿç¯å¢ƒä¸­çš„ Python è§£é‡Šå™¨

### å¯åŠ¨å¸¸è§ Web æ¡†æ¶ç¤ºä¾‹

1. FastAPI / Starletteï¼ˆä½¿ç”¨ Uvicornï¼‰

```toml
[tool.pdm.scripts]
start = "uvicorn app:app --reload --host 0.0.0.0 --port 8000"
```

2. Flask

```toml
[tool.pdm.scripts]
start = "flask --app app run --debug --port 5000"

```

æˆ–è€…ï¼š

```toml
[tool.pdm.scripts]
start = "python app.py"
```

åœ¨ app.py ä¸­ï¼š

```py
if __name__ == "__main__":
    app.run(debug=True, port=5000)
```

3. Django

```toml
[tool.pdm.scripts]
runserver = "python manage.py runserver 8000"
migrate = "python manage.py migrate"
```

```bash
pdm run runserver
```

### æŸ¥çœ‹å½“å‰ Python å’Œç¯å¢ƒ

```bash
cd /path/to/project
pdm info
```

è¾“å‡ºç¤ºä¾‹ï¼š

```bash
PDM version:
  2.26.0
Python Interpreter:
  /Users/houfei/Desktop/labelllm/backend/.venv/bin/python (3.11)
Project Root:
  /Users/houfei/Desktop/labelllm/backend
Local Packages:
  /Users/houfei/Desktop/labelllm/backend/.venv/lib/python3.11/site-packages
```

æŒ‡å®š Python ç‰ˆæœ¬

```bash
pdm use 3.11
# æˆ–
pdm use /usr/bin/python3.11
```
